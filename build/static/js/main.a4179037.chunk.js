(this["webpackJsonpjsons-compare"]=this["webpackJsonpjsons-compare"]||[]).push([[0],{25:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(11),o=n.n(c),s=n(10),u=n(4),i=n(3),l=n.n(i),p=n(8),m=n(0),j=function(e){var t=e.className,n=e.handleAdd,a=function(e){var t=new FileReader;return new Promise((function(n,a){t.onerror=function(){t.abort(),a(new DOMException("Problem parsing input file."))},t.onload=function(){n({name:e.name,value:t.result})},t.readAsText(e)}))},r=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,r=t.target.files,Promise.all(Array.from(r).map(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("label",{className:t,children:[Object(m.jsx)("input",{onChange:r,accept:"application/JSON",type:"file",multiple:!0,hidden:!0}),"Upload JSONs"]})},d=n(6),f=n(9),b=function(e){var t=e.jsonData,n=e.handleUpdate,a=e.handleRemove,r=function(e){var a=e.target,r=a.name,c=a.value;n(Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},r,c)))};return Object(m.jsxs)("div",{className:"JsonDataForm",children:[Object(m.jsx)("div",{className:"JsonDataForm__remove",onClick:a,title:"Remove JSON",children:"X"}),Object(m.jsx)("input",{name:"name",placeholder:"JSON name",className:"JsonDataForm__input",onChange:r,value:t.name}),Object(m.jsx)("textarea",{name:"value",placeholder:"JSON value",className:"JsonDataForm__input JsonDataForm__textarea",onChange:r,value:t.value})]})},v={name:"",value:""},O=function(e){var t=e.jsonsData,n=e.setJsonsData;return Object(m.jsx)("div",{className:"CompareInput",children:Object(m.jsxs)("div",{className:"CompareInput__content",children:[t.map((function(e,a){return Object(m.jsx)(b,{jsonData:e,className:"CompareInput__item",handleUpdate:function(e){return function(e,a){var r=Object(u.a)(t);r[a]=e,n(r)}(e,a)},handleRemove:function(){return function(e){n(t.filter((function(t,n){return n!==e})))}(a)}},a)})),Object(m.jsxs)("div",{className:"CompareInput__item CompareInput__item--add",children:[Object(m.jsx)("div",{className:"CompareInput__button CompareInput__button--add",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;n([].concat(Object(u.a)(t),[e]))}()},children:"+ Add JSON form"}),Object(m.jsx)("div",{className:"CompareInput__separator",children:"or"}),Object(m.jsx)(j,{className:"CompareInput__button CompareInput__button--upload",handleAdd:function(e){return a=e,void n([].concat(Object(u.a)(t),Object(u.a)(a)));var a}})]})]})})},h=function(e){var t=e.comparedData;return t?Object(m.jsx)("div",{className:"CompareOutput",children:Object(m.jsx)("pre",{children:JSON.stringify(t," ",2)})}):null},x=n(12),_=n.n(x),N=function(e){var t=e.jsonsData,n=e.setComparedData,a=function e(t){return Object.keys(t).map((function(n){return"object"===typeof t[n]?e(t[n]).map((function(e){return"".concat(n,".").concat(e)})):n})).flat()},r=function(e){var t={};try{e.forEach((function(e){var n=e.name,r=e.value;return t[n]=a(_.a.parse(r))}))}catch(n){return{}}return t};return Object(m.jsx)("button",{className:"JsonDataCompareButton",onClick:function(){n(function(e){var t={},n=r(e);return Object.values(n).flat().filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(a){var r=e.map((function(e){var t=e.name;return-1===n[t].indexOf(a)?t:void 0})).filter((function(e){return e}));r.length>0&&(t[a]=r)})),t}(t))},children:"Compare"})};var C=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),o=Object(s.a)(c,2),u=o[0],i=o[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(O,{jsonsData:n,setJsonsData:r}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){r([]),i()},children:"Reset"}),Object(m.jsx)(N,{jsonsData:n,setComparedData:i})]}),Object(m.jsx)(h,{comparedData:u})]})};o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.a4179037.chunk.js.map